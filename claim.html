<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klaim Akses | AI Satset</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050a30;
            --card-color: #0f1d42;
            --border-color: #1e3a8a;
            --text-main: #f1f5f9;
            --highlight: #38bdf8;
            --logo-bg: linear-gradient(135deg, #0f2fd8, #1e3a8a);
            --primary-gradient-start: #38bdf8;
            --primary-gradient-end: #0f2fd8;
            --orb-opacity: 0.3;
            --input-bg: rgba(15, 29, 66, 0.5);
            --input-border: #1e3a8a;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow: hidden;
            position: relative;
        }
        .bg-orb { position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: var(--orb-opacity); animation: float 12s infinite ease-in-out; }
        .orb-1 { width: 500px; height: 500px; background: #0f2fd8; top: -10%; left: -10%; }
        .orb-2 { width: 400px; height: 400px; background: #38bdf8; bottom: -10%; right: -10%; animation-delay: -5s; }
        @keyframes float { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        .logo-container-header {
            width: 70px; height: 70px; background: var(--logo-bg); border-radius: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px auto; overflow: hidden;
        }
        .logo-svg { width: 100%; height: 100%; transform: scale(1.5); }
        .claim-card {
            background: var(--card-color);
            border: 1px solid var(--border-color);
            padding: 40px 30px; border-radius: 24px;
            width: 100%; max-width: 420px; text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        .input-box {
            width: 100%; background: var(--input-bg);
            border: 1px solid var(--input-border);
            color: var(--text-main); padding: 14px;
            border-radius: 12px; font-size: 1rem; text-align: center;
            outline: none; transition: border-color 0.3s;
            margin-bottom: 20px;
        }
        .input-box:focus { border-color: var(--highlight); }
        .btn-action {
            width: 100%; padding: 14px;
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white; border: none; border-radius: 12px;
            font-weight: 600; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-action:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(37, 99, 235, 0.5); }
    </style>
</head>
<body>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <div class="claim-card">
        <div class="logo-container-header">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080 1080" class="logo-svg">
                <path fill="#f7fa1a" d="M 530.5,241.5 C 553.637,238.99 571.47,247.324 584,266.5C 597.929,295.935 612.096,325.268 626.5,354.5C 570.609,414.554 514.942,474.721 459.5,535C 459.905,535.945 460.572,536.612 461.5,537C 480.547,541.512 499.547,546.178 518.5,551C 520.286,551.196 521.619,552.029 522.5,553.5C 489.667,613.476 455.833,672.81 421,731.5C 425.794,711.089 430.628,690.589 435.5,670C 433.919,652.824 425.585,640.157 410.5,632C 364.86,610.513 319.527,588.513 274.5,566C 259.169,551.669 253.669,534.169 258,513.5C 261.449,501.439 268.616,492.273 279.5,486C 322.136,465.349 364.802,444.683 407.5,424C 417.623,417.544 426.123,409.377 433,399.5C 454.744,354.346 476.744,309.346 499,264.5C 506.987,253.269 517.487,245.603 530.5,241.5 Z" />
                <path fill="#f7fa19" d="M 612.5,517.5 C 610.485,516.076 608.152,515.41 605.5,515.5C 591.538,513.176 577.871,509.843 564.5,505.5C 596.611,445.948 629.778,386.948 664,328.5C 659.517,347.961 655.017,367.461 650.5,387C 651.774,403.551 659.441,416.218 673.5,425C 718.566,446.202 763.233,467.868 807.5,490C 827.579,509.406 831.079,531.573 818,556.5C 814.167,561.667 809.667,566.167 804.5,570C 763.073,590.713 721.74,611.38 680.5,632C 668.086,639.746 657.586,649.579 649,661.5C 626.054,709.06 602.387,756.06 578,802.5C 556.829,822.487 533.996,824.654 509.5,809C 505.631,805.466 502.131,801.633 499,797.5C 484.124,768.246 469.624,738.746 455.5,709C 512.602,646.061 570.269,583.561 628.5,521.5C 623.188,520.038 617.855,518.705 612.5,517.5 Z" />
            </svg>
        </div>
        <h1 class="text-2xl font-bold text-[#f1f5f9] mb-2">Aktivasi Akses</h1>
        <p class="text-[#94a3b8] text-sm mb-6">Masukkan Email pembelian Lynk.id Anda</p>

        <input id="emailInput" type="email" placeholder="contoh@email.com" class="input-box">
        
        <button onclick="checkEmail()" id="btnCheck" class="btn-action">
            DAPATKAN KODE AKSES
        </button>

        <div id="resultArea" class="hidden mt-6 bg-[#0f2fd8]/20 border border-[#38bdf8] p-4 rounded-xl">
            <p class="text-xs text-[#38bdf8] mb-1">Kode Akses Anda:</p>
            <h2 id="codeDisplay" class="text-2xl font-mono font-bold tracking-widest text-white select-all mb-3">...</h2>
            <button onclick="copyCode()" class="text-xs bg-[#10b981] text-white px-4 py-2 rounded-lg hover:bg-[#059669] font-bold">
                Salin & Masuk Sekarang
            </button>
        </div>

        <p id="errorMsg" class="hidden mt-4 text-red-400 text-sm font-medium"></p>
    </div>

    <script>
        async function checkEmail() {
            const email = document.getElementById('emailInput').value.trim();
            const btn = document.getElementById('btnCheck');
            const resultArea = document.getElementById('resultArea');
            const errorMsg = document.getElementById('errorMsg');

            if(!email) return alert("Masukkan email!");

            btn.innerText = "Mengecek Database...";
            btn.disabled = true;
            resultArea.classList.add('hidden');
            errorMsg.classList.add('hidden');

            try {
                const res = await fetch('/api/claim', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });

                const data = await res.json();

                if (res.ok && data.success) {
                    document.getElementById('codeDisplay').innerText = data.code;
                    resultArea.classList.remove('hidden');
                } else {
                    errorMsg.innerText = data.message;
                    errorMsg.classList.remove('hidden');
                }
            } catch (e) {
                errorMsg.innerText = "Gagal terhubung ke server.";
                errorMsg.classList.remove('hidden');
            } finally {
                btn.innerText = "DAPATKAN KODE AKSES";
                btn.disabled = false;
            }
        }

        function copyCode() {
            const code = document.getElementById('codeDisplay').innerText;
            navigator.clipboard.writeText(code);
            window.location.href = "/";
        }
    </script>
</body>
</html>
