<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Katalog TIM AI Konten | by @ai.satset</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050a30; --card-color: #0f1d42; --border-color: #1e3a8a;
            --text-main: #f1f5f9; --text-muted: #94a3b8; --highlight: #38bdf8;
            --logo-bg: linear-gradient(135deg, #0f2fd8, #1e3a8a);
            --primary-gradient-start: #38bdf8; --primary-gradient-end: #0f2fd8;
            --orb-opacity: 0.3; --chat-bg: rgba(15, 29, 66, 0.7);
            --chat-bubble-bot: #1e3a8a; --chat-bubble-user: #38bdf8;
            --chat-text-bot: #f1f5f9; --chat-text-user: #050a30;
            --input-bg: rgba(15, 29, 66, 0.5); --input-border: #1e3a8a;
            --tool-icon-bg: rgba(56, 189, 248, 0.15); --tool-hover-border: #38bdf8;
            --toggle-bg: var(--card-color); --toggle-border: var(--border-color);
        }
        [data-theme="light"] {
            --bg-color: #f0f7ff; --card-color: #ffffff; --border-color: #cbd5e1;
            --text-main: #1e293b; --text-muted: #64748b; --highlight: #0284c7;
            --logo-bg: linear-gradient(135deg, #3b82f6, #1d4ed8);
            --primary-gradient-start: #3b82f6; --primary-gradient-end: #1d4ed8;
            --orb-opacity: 0.15; --chat-bg: rgba(255, 255, 255, 0.9);
            --chat-bubble-bot: #f1f5f9; --chat-bubble-user: #3b82f6;
            --chat-text-bot: #1e293b; --chat-text-user: #ffffff;
            --input-bg: #ffffff; --input-border: #cbd5e1; --tool-icon-bg: #e0f2fe; --tool-hover-border: #3b82f6;
            --toggle-bg: #ffffff; --toggle-border: #cbd5e1;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg-color); color: var(--text-main); margin: 0; padding: 0; min-height: 100vh; overflow-x: hidden; display: flex; flex-direction: column; align-items: center; position: relative; transition: background-color 0.4s ease, color 0.4s ease; }
        .bg-orb { position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: var(--orb-opacity); animation: float 12s infinite ease-in-out; }
        .orb-1 { width: 600px; height: 600px; background: #0f2fd8; top: -20%; left: -10%; }
        .orb-2 { width: 500px; height: 500px; background: #38bdf8; bottom: -20%; right: -10%; animation-delay: -5s; }
        @keyframes float { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(20px, 30px); } }
        .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 50; background: var(--toggle-bg); border: 1px solid var(--toggle-border); color: var(--text-main); width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.3s ease; }
        .theme-toggle:hover { transform: scale(1.1); }
        .theme-toggle svg { width: 22px; height: 22px; fill: currentColor; }
        .main-wrapper { width: 100%; max-width: 1000px; padding: 40px 20px; position: relative; z-index: 1; flex: 1; display: none; }
        .header { text-align: center; display: flex; flex-direction: column; align-items: center; margin-bottom: 40px; }
        .logo-container-header { width: 70px; height: 70px; background: var(--logo-bg); border-radius: 18px; box-shadow: 0 8px 20px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; margin-bottom: 20px; overflow: hidden; }
        .logo-svg { width: 100%; height: 100%; transform: scale(1.5); transition: transform 0.3s; }
        .header h1 { font-size: 2.5rem; font-weight: 800; color: var(--text-main); letter-spacing: -1px; margin: 0 0 10px 0; line-height: 1.2; }
        .header p { font-size: 1.1rem; color: var(--text-muted); max-width: 600px; margin: 0; line-height: 1.6; }
        .aimin-container { background: var(--chat-bg); backdrop-filter: blur(12px); border: 1px solid var(--border-color); border-radius: 24px; padding: 24px; margin-bottom: 50px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; width: 100%; overflow: hidden; }
        .aimin-header { display: flex; align-items: center; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); margin-bottom: 15px; }
        .aimin-avatar { width: 45px; height: 45px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 4px 10px rgba(16, 185, 129, 0.4); animation: pulse-avatar 2s infinite; flex-shrink: 0; }
        @keyframes pulse-avatar { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .aimin-info h3 { margin: 0; font-size: 1.1rem; font-weight: 700; color: var(--text-main); }
        .aimin-info span { font-size: 0.85rem; color: #10b981; font-weight: 600; }
        .chat-area { display: flex; flex-direction: column; gap: 12px; max-height: 350px; min-height: 200px; overflow-y: auto; margin-bottom: 15px; padding-right: 5px; }
        .chat-area::-webkit-scrollbar { width: 6px; }
        .chat-area::-webkit-scrollbar-track { background: transparent; }
        .chat-area::-webkit-scrollbar-thumb { background-color: var(--border-color); border-radius: 10px; }
        .chat-bubble { padding: 12px 18px; border-radius: 16px; font-size: 0.95rem; line-height: 1.5; max-width: 85%; word-wrap: break-word; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .chat-bot { align-self: flex-start; background-color: var(--chat-bubble-bot); color: var(--chat-text-bot); border-top-left-radius: 4px; }
        .chat-user { align-self: flex-end; background-color: var(--chat-bubble-user); color: var(--chat-text-user); border-bottom-right-radius: 4px; text-align: right; }
        .chat-actions { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
        .action-btn { padding: 8px 16px; background: transparent; border: 1px solid var(--highlight); color: var(--highlight); border-radius: 20px; cursor: pointer; font-size: 0.85rem; transition: all 0.2s; font-weight: 600; }
        .action-btn:hover { background: var(--highlight); color: #fff; transform: translateY(-2px); }
        .chat-input-wrapper { display: flex; gap: 10px; border-top: 1px solid var(--border-color); padding-top: 15px; margin-top: auto; width: 100%; box-sizing: border-box; }
        .chat-input { flex: 1; background: var(--input-bg); border: 1px solid var(--input-border); color: var(--text-main); padding: 12px 20px; border-radius: 25px; font-family: inherit; font-size: 0.95rem; outline: none; transition: border-color 0.3s; min-width: 0; width: 100%; }
        .chat-input:focus { border-color: var(--highlight); }
        .send-btn { background: var(--highlight); color: white; border: none; border-radius: 50%; width: 46px; height: 46px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.2s; flex-shrink: 0; }
        .send-btn:hover { transform: scale(1.1); }
        .send-btn svg { width: 20px; height: 20px; fill: white; margin-left: 3px; }
        .wa-btn { background: #25D366; color: white; display: inline-flex; align-items: center; gap: 8px; text-decoration: none; padding: 10px 20px; border-radius: 25px; font-size: 0.9rem; font-weight: 600; margin-top: 5px; transition: transform 0.2s; }
        .wa-btn:hover { background: #128C7E; transform: translateY(-2px); }
        .tool-category-header { font-size: 1.25rem; font-weight: 700; color: var(--highlight); margin-top: 3rem; margin-bottom: 1.5rem; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; display: flex; align-items: center; gap: 10px; }
        .ai-tool-card { background: var(--card-color); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px; transition: all 0.3s ease; cursor: pointer; height: 100%; display: flex; flex-direction: column; justify-content: space-between; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .ai-tool-card:hover { transform: translateY(-4px); border-color: var(--tool-hover-border); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .tool-content-top { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 15px; }
        .tool-icon-wrapper { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; background: var(--tool-icon-bg); border-radius: 12px; flex-shrink: 0; border: 1px solid rgba(56, 189, 248, 0.2); }
        .tool-icon-wrapper .emoji-icon { font-size: 1.5rem; }
        .tool-name { font-size: 1.05rem; font-weight: 700; color: var(--text-main); margin: 0 0 6px 0; line-height: 1.3; }
        .tool-desc { font-size: 0.85rem; color: var(--text-muted); line-height: 1.5; margin: 0; }
        .btn-access { align-self: flex-end; padding: 8px 16px; font-size: 0.85rem; background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end)); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; white-space: nowrap; transition: all 0.2s; }
        .btn-access:hover { opacity: 0.9; transform: translateY(-1px); }
        .site-footer { margin-top: auto; padding: 20px; color: var(--text-muted); font-size: 0.85rem; text-align: center; }
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-color); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        .login-card {
            background: var(--card-color); border: 1px solid var(--border-color); padding: 40px 30px;
            border-radius: 24px; width: 100%; max-width: 380px; text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); backdrop-filter: blur(10px);
            animation: slideUp 0.5s ease-out;
        }
        .login-title { font-size: 1.75rem; font-weight: 700; color: var(--text-main); margin: 0 0 10px 0; }
        .login-desc { color: var(--text-muted); font-size: 0.95rem; margin-bottom: 30px; line-height: 1.5; }
        .login-error { color: #ef4444; font-size: 0.85rem; margin-top: 15px; display: none; font-weight: 500; }
        .password-wrapper { position: relative; width: 100%; display: flex; align-items: center; }
        .password-input {
            width: 100%; background: var(--input-bg); border: 1px solid var(--input-border);
            color: var(--text-main); padding: 14px 45px; border-radius: 12px;
            font-size: 1rem; text-align: center; outline: none; letter-spacing: 2px; transition: border-color 0.3s;
        }
        .password-input:focus { border-color: var(--highlight); }
        .password-input::placeholder { letter-spacing: normal; font-size: 0.9rem; }
        .toggle-password {
            position: absolute; right: 10px; background: none; border: none; cursor: pointer;
            color: var(--text-muted); padding: 8px; display: flex; align-items: center; justify-content: center;
            transition: color 0.3s; z-index: 10;
        }
        .toggle-password:hover { color: var(--highlight); }
        .btn-login {
            width: 100%; padding: 14px; margin-top: 20px; font-size: 1rem;
            background: linear-gradient(135deg, var(--primary-gradient-start), var(--primary-gradient-end));
            color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .btn-login:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(37, 99, 235, 0.5); }
        .tools-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        @media (max-width: 768px) { .tools-grid { grid-template-columns: 1fr; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @media (max-width: 768px) {
             .main-wrapper { padding: 15px 12px; max-width: 100%; overflow-x: hidden; }
             .header h1 { font-size: 1.6rem; margin-bottom: 5px; }
             .header p { font-size: 0.9rem; padding: 0 10px; line-height: 1.4; }
             .logo-container-header { width: 55px; height: 55px; margin-bottom: 15px; }
             .aimin-container { padding: 15px; border-radius: 16px; margin-bottom: 30px; width: auto; }
             .aimin-header { padding-bottom: 10px; margin-bottom: 10px; }
             .chat-bubble { max-width: 88%; font-size: 0.9rem; padding: 10px 14px; }
             .chat-area { gap: 10px; margin-bottom: 10px; }
             .chat-actions { gap: 6px; }
             .action-btn { padding: 6px 12px; font-size: 0.8rem; }
             .chat-input-wrapper { padding-top: 10px; flex-wrap: nowrap; }
             .chat-input { padding: 10px 15px; font-size: 0.9rem; width: 100%; min-width: 0; }
             .send-btn { width: 40px; height: 40px; }
             .send-btn svg { width: 18px; height: 18px; margin-left: 2px; }
             .login-card { padding: 30px 20px; max-width: 90%; }
             .login-title { font-size: 1.4rem; }
             .login-desc { font-size: 0.85rem; margin-bottom: 20px; }
        }
    </style>
</head>
<body>
    <div id="login-overlay">
        <div class="bg-orb orb-1" style="width: 250px; height: 250px; opacity: 0.4;"></div>
        <div class="login-card">
            <div class="logo-container-header" style="margin: 0 auto 20px auto; width: 60px; height: 60px;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080 1080" class="logo-svg">
                    <path fill="#f7fa1a" d="M 530.5,241.5 C 553.637,238.99 571.47,247.324 584,266.5C 597.929,295.935 612.096,325.268 626.5,354.5C 570.609,414.554 514.942,474.721 459.5,535C 459.905,535.945 460.572,536.612 461.5,537C 480.547,541.512 499.547,546.178 518.5,551C 520.286,551.196 521.619,552.029 522.5,553.5C 489.667,613.476 455.833,672.81 421,731.5C 425.794,711.089 430.628,690.589 435.5,670C 433.919,652.824 425.585,640.157 410.5,632C 364.86,610.513 319.527,588.513 274.5,566C 259.169,551.669 253.669,534.169 258,513.5C 261.449,501.439 268.616,492.273 279.5,486C 322.136,465.349 364.802,444.683 407.5,424C 417.623,417.544 426.123,409.377 433,399.5C 454.744,354.346 476.744,309.346 499,264.5C 506.987,253.269 517.487,245.603 530.5,241.5 Z" />
                    <path fill="#f7fa19" d="M 612.5,517.5 C 610.485,516.076 608.152,515.41 605.5,515.5C 591.538,513.176 577.871,509.843 564.5,505.5C 596.611,445.948 629.778,386.948 664,328.5C 659.517,347.961 655.017,367.461 650.5,387C 651.774,403.551 659.441,416.218 673.5,425C 718.566,446.202 763.233,467.868 807.5,490C 827.579,509.406 831.079,531.573 818,556.5C 814.167,561.667 809.667,566.167 804.5,570C 763.073,590.713 721.74,611.38 680.5,632C 668.086,639.746 657.586,649.579 649,661.5C 626.054,709.06 602.387,756.06 578,802.5C 556.829,822.487 533.996,824.654 509.5,809C 505.631,805.466 502.131,801.633 499,797.5C 484.124,768.246 469.624,738.746 455.5,709C 512.602,646.061 570.269,583.561 628.5,521.5C 623.188,520.038 617.855,518.705 612.5,517.5 Z" />
                </svg>
            </div>
            <h2 class="login-title">Akses Terbatas AI Satset</h2>
            <p class="login-desc">Masukkan kode akses untuk menggunakan</p>
            <div class="password-wrapper">
                <input type="password" id="accessCodeInput" class="password-input" placeholder="Kode Akses">
                <button type="button" id="togglePasswordBtn" class="toggle-password" title="Lihat Sandi">
                    <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    <svg id="eyeOffIcon" style="display:none;" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07-2.3 2.3"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                </button>
            </div>
            <button id="loginBtn" class="btn-login">Masuk</button>
            <p id="loginError" class="login-error">Kode akses salah! Coba lagi.</p>
        </div>
    </div>
    <button class="theme-toggle" id="themeBtn" title="Ganti Tema">
        <svg id="iconSun" style="display:none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.29 1.29c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.29 1.29c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.29-1.29zm1.41-13.78c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.29 1.29c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.29-1.29zM7.28 17.65c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.29 1.29c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.29-1.29z"/></svg>
        <svg id="iconMoon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>
    </button>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div class="main-wrapper" id="mainContent">
        <div class="header">
            <div class="logo-container-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1080 1080" class="logo-svg">
                    <path fill="#f7fa1a" d="M 530.5,241.5 C 553.637,238.99 571.47,247.324 584,266.5C 597.929,295.935 612.096,325.268 626.5,354.5C 570.609,414.554 514.942,474.721 459.5,535C 459.905,535.945 460.572,536.612 461.5,537C 480.547,541.512 499.547,546.178 518.5,551C 520.286,551.196 521.619,552.029 522.5,553.5C 489.667,613.476 455.833,672.81 421,731.5C 425.794,711.089 430.628,690.589 435.5,670C 433.919,652.824 425.585,640.157 410.5,632C 364.86,610.513 319.527,588.513 274.5,566C 259.169,551.669 253.669,534.169 258,513.5C 261.449,501.439 268.616,492.273 279.5,486C 322.136,465.349 364.802,444.683 407.5,424C 417.623,417.544 426.123,409.377 433,399.5C 454.744,354.346 476.744,309.346 499,264.5C 506.987,253.269 517.487,245.603 530.5,241.5 Z" />
                    <path fill="#f7fa19" d="M 612.5,517.5 C 610.485,516.076 608.152,515.41 605.5,515.5C 591.538,513.176 577.871,509.843 564.5,505.5C 596.611,445.948 629.778,386.948 664,328.5C 659.517,347.961 655.017,367.461 650.5,387C 651.774,403.551 659.441,416.218 673.5,425C 718.566,446.202 763.233,467.868 807.5,490C 827.579,509.406 831.079,531.573 818,556.5C 814.167,561.667 809.667,566.167 804.5,570C 763.073,590.713 721.74,611.38 680.5,632C 668.086,639.746 657.586,649.579 649,661.5C 626.054,709.06 602.387,756.06 578,802.5C 556.829,822.487 533.996,824.654 509.5,809C 505.631,805.466 502.131,801.633 499,797.5C 484.124,768.246 469.624,738.746 455.5,709C 512.602,646.061 570.269,583.561 628.5,521.5C 623.188,520.038 617.855,518.705 612.5,517.5 Z" />
                </svg>
            </div>
            <h1>TIM AI Konten | by @ai.satset</h1>
            <p>Kamu punya tim expert konten dengan 12 ahli sekarang. Ambil jalan pintas cerdas, Delegasikan ke ahlinya!</p>
        </div>
        <div class="aimin-container" id="aimin-section">
            <div class="aimin-header">
                <div class="aimin-avatar">ðŸ¤–</div>
                <div class="aimin-info">
                    <h3>Aimin</h3>
                    <span>Manager Tim AI Konten</span>
                </div>
            </div>
            <div class="chat-area" id="chatArea"></div>
            <div id="typingIndicator" class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
            <div class="chat-actions" id="chatActions"></div>
            <div class="chat-input-wrapper">
                <input type="text" id="userInput" class="chat-input" placeholder="Tanya Aimin (misal: 'divisi analis')...">
                <button class="send-btn" id="sendBtn" title="Kirim">
                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
        <div class="content-box" id="catalog-container"></div>
    </div>
    <div class="site-footer">&copy; 2025 TIM AI Konten @ai.satset.</div>
    <script type="module">
        const loginOverlay = document.getElementById('login-overlay');
        const mainContent = document.getElementById('mainContent');
        const chatArea = document.getElementById('chatArea');
        const chatActs = document.getElementById('chatActions');
        const typingIndicator = document.getElementById('typingIndicator');
        const userInput = document.getElementById('userInput');
        const loginBtn = document.getElementById('loginBtn');
        const accessCodeInput = document.getElementById('accessCodeInput');
        const togglePasswordBtn = document.getElementById('togglePasswordBtn');
        const eyeIcon = document.getElementById('eyeIcon');
        const eyeOffIcon = document.getElementById('eyeOffIcon');

        const toolsData=[{title:"DIVISI ANALIS",icon:"ðŸ”",tools:[{name:"Product Value Analyst",desc:"Analisis mendalam terhadap info detail produk.",link:"https://gemini.google.com/share/807abd291a8a",icon:"ðŸ“ˆ"},{name:"Market Mapper",desc:"Intelijen Mapping Market untuk memetakan landscape pasar Anda.",link:"https://gemini.google.com/share/85d1aaa7646c",icon:"ðŸ—ºï¸"},{name:"Psikologis Market",desc:"Detektif Audience Profiler: membaca pikiran & kebiasaan target market.",link:"https://gemini.google.com/share/1d2b52527cbe",icon:"ðŸ§ "}]},{title:"DIVISI KONTEN PLANNER",icon:"ðŸ“…",tools:[{name:"Perencana Konten",desc:"Membuat rencana konten media sosial lengkap (ide, format, dan CTA) dari topik Anda.",link:"https://gemini.google.com/share/015ab1a78ecc",icon:"ðŸ“"}]},{title:"DIVISI STRATEGI KOMUNIKASI",icon:"ðŸ“£",tools:[{name:"Copywriting",desc:"Buat naskah iklan, caption, atau skrip video yang menjual dalam hitungan detik.",link:"https://gemini.google.com/share/6469a0180f12",icon:"âœï¸"},{name:"Teks ke Suara",desc:"Ubah teks atau naskah kamu menjadi audio (voice over) yang alami.",link:"https://gemini.google.com/share/3508bee52723",icon:"ðŸŽ™ï¸"}]},{title:"DIVISI EDITING",icon:"ðŸŽ¨",tools:[{name:"Gabung Gambar",desc:"Unggah 2-5 gambar, beri instruksi, dan biarkan AI menggabungkannya.",link:"https://gemini.google.com/share/72fae79337fe",icon:"ðŸ§©"},{name:"Foto Model",desc:"Satset bikin Model AI Custom atau Ubah Pose Kamu.",link:"https://gemini.google.com/share/72dab91db5f6",icon:"ðŸ“¸"},{name:"Foto Produk",desc:"Satset bikin foto ngasal, jadi foto mahal.",link:"https://gemini.google.com/share/bd4f158ed174",icon:"ðŸ“¦"},{name:"Foto Fashion",desc:"Masukkan foto fashion kamu, ubah menjadi menarik dalam hitungan detik.",link:"https://gemini.google.com/share/b59aa1071162",icon:"ðŸ‘—"},{name:"Edit Foto",desc:"Satset Edit dan Perbaiki Foto Kamu.",link:"https://gemini.google.com/share/be8894819e0f",icon:"âœ¨"},{name:"Poster Iklan",desc:"Buat poster iklan 3D hyper-realistic untuk produk kamu.",link:"https://gemini.google.com/share/a0b75ddc2044",icon:"ðŸ–¼ï¸"}]}];

        const mainContainer = document.getElementById('catalog-container');
        toolsData.forEach(s=>{
            mainContainer.innerHTML+=`<div class="tool-category-header"><span class="emoji-icon">${s.icon}</span><span>${s.title}</span></div><div class="tools-grid">${s.tools.map(t=>`<div class="ai-tool-card"><div class="tool-content-top"><div class="tool-icon-wrapper"><span class="emoji-icon">${t.icon}</span></div><div class="flex-1"><h3 class="tool-name">${t.name}</h3><p class="tool-desc">${t.desc}</p></div></div><a href="${t.link}" target="_blank" class="btn-access">Akses Alat</a></div>`).join('')}</div>`;
        });

        function addMsg(txt, sender){
            const msgDiv = document.createElement('div');
            msgDiv.className = `chat-bubble ${sender === 'bot' ? 'chat-bot' : 'chat-user'}`;
            msgDiv.innerHTML = txt;
            chatArea.insertBefore(msgDiv, typingIndicator); 
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showTyping() { typingIndicator.style.display = 'flex'; chatArea.scrollTop = chatArea.scrollHeight; }
        function hideTyping() { typingIndicator.style.display = 'none'; }

        function showOpts(){
            chatActs.innerHTML = '';
            [{t:"Jelaskan Fitur", a:"ex"}, {t:"Hubungi Admin", a:"wa"}, {t:"Lihat Katalog", a:"sc"}].forEach(o => {
                chatActs.innerHTML += `<button class="action-btn" onclick="act('${o.a}')">${o.t}</button>`;
            });
        }

        const fallbackKnowledge = [
            { keywords: ["halo", "hi", "hai", "pagi", "sore"], responses: ["Halo kak! ðŸ‘‹ Aimin di sini!", "Hai hai! Mau bahas konten apa?"] },
            { keywords: ["analis", "riset"], responses: ["Soal riset, Divisi Analis jagoannya kak."] },
            { keywords: ["planner", "ide"], responses: ["Buntu ide? Tenang, Divisi Planner solusinya."] },
            { keywords: ["harga", "biaya", "beli"], responses: ["Langsung tanya Admin WA ya kak! Klik tombol di bawah."], action: "wa" }
        ];

        async function processUserText(text) {
            showTyping();
            const delay = Math.floor(Math.random() * 1000) + 1000;
            setTimeout(async () => {
                try {
                    const res = await fetch('/api/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: text })
                    });
                    if (!res.ok) throw new Error("API Error");
                    const data = await res.json();
                    hideTyping();
                    addMsg(data.reply, 'bot');
                    setTimeout(showOpts, 800);
                } catch (e) {
                    hideTyping();
                    const lower = text.toLowerCase();
                    const found = fallbackKnowledge.find(k => k.keywords.some(kw => lower.includes(kw)));
                    if(found) {
                        addMsg(found.responses[0], 'bot');
                        if(found.action === 'wa') setTimeout(() => act('wa'), 500);
                        else setTimeout(showOpts, 1000);
                    } else {
                        addMsg("Waduh, Aimin pusing. Coba tanya lagi atau klik menu di bawah ya kak! ðŸ˜…", 'bot');
                        setTimeout(showOpts, 1000);
                    }
                }
            }, delay);
        }

        window.act = (type) => {
            chatActs.innerHTML = '';
            if(type === 'ex') {
                addMsg("Kami punya 4 divisi: Analis, Planner, Komunikasi, dan Editing.", 'bot');
                setTimeout(showOpts, 1500);
            } else if(type === 'wa') {
                addMsg("Hubungi Admin via WhatsApp:", 'bot');
                const waDiv = document.createElement('div');
                waDiv.innerHTML = `<a href="https://wa.me/6285387745554" target="_blank" class="wa-btn"><svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg> Hubungi WhatsApp</a>`;
                waDiv.style.textAlign = 'center'; waDiv.style.marginTop = '10px';
                chatArea.insertBefore(waDiv, typingIndicator);
                setTimeout(() => {
                    const btn = document.createElement('button');
                    btn.className = 'action-btn';
                    btn.innerText = "Kembali ke Menu";
                    btn.onclick = () => { chatActs.innerHTML = ''; showOpts(); };
                    chatActs.appendChild(btn);
                }, 1000);
            } else if(type === 'sc') {
                addMsg("Meluncur ke bawah... ðŸš€", 'bot');
                document.getElementById('catalog-container').scrollIntoView({behavior:'smooth'});
                setTimeout(showOpts, 3000);
            }
        }

        document.getElementById('sendBtn').onclick = () => {
            const v = document.getElementById('userInput').value.trim();
            if(v) {
                addMsg(v, 'user');
                document.getElementById('userInput').value = '';
                chatActs.innerHTML = '';
                processUserText(v);
            }
        }

        document.getElementById('userInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') document.getElementById('sendBtn').click();
        });

        togglePasswordBtn.addEventListener('click', () => {
            const type = accessCodeInput.getAttribute('type') === 'password' ? 'text' : 'password';
            accessCodeInput.setAttribute('type', type);
            if (type === 'text') { eyeIcon.style.display = 'none'; eyeOffIcon.style.display = 'block'; }
            else { eyeIcon.style.display = 'block'; eyeOffIcon.style.display = 'none'; }
        });

        window.handleLogin = async function() {
            const code = accessCodeInput.value.trim();
            const err = document.getElementById('loginError');
            if(!code) return;
            loginBtn.innerText = "Memproses..."; loginBtn.disabled = true; err.style.display = 'none';
            try {
                const res = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code })
                });
                const data = await res.json();
                if(res.ok && data.success){
                    sessionStorage.setItem('auth','true');
                    sessionStorage.setItem('my_token', data.token);
                    sessionStorage.setItem('my_code', code);
                    loginOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loginOverlay.style.display = 'none';
                        mainContent.style.display = 'block';
                    }, 500);
                    // AIMIN SAPAAN: Menggunakan hybrid logic setelah login sukses
                    setTimeout(() => {
                        const initialGreeting = "Halo! Saya <b>Aimin</b>, Manager Tim AI Konten kamu. ðŸ‘‹";
                        addMsg(initialGreeting, 'bot');
                        setTimeout(() => { 
                            addMsg("Ada yang bisa saya bantu hari ini?", 'bot'); 
                            showOpts(); 
                        }, 800);
                    }, 800);
                    startSecurityCheck(code, data.token);
                } else {
                    err.innerText = data.message || "Kode Akses Salah!";
                    err.style.display = 'block';
                    err.style.animation = 'none'; err.offsetHeight; err.style.animation = 'shake 0.4s ease-in-out';
                }
            } catch(e) {
                err.innerText = "Error Koneksi"; err.style.display = 'block';
            } finally {
                loginBtn.innerText = "Masuk"; loginBtn.disabled = false;
            }
        }

        loginBtn.addEventListener('click', handleLogin);
        accessCodeInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleLogin(); });

        const tBtn = document.getElementById('themeBtn');
        const iconSun = document.getElementById('iconSun');
        const iconMoon = document.getElementById('iconMoon');
        const savedTheme = localStorage.getItem('theme') || 'light'; 

        if (savedTheme === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
            iconSun.style.display = 'block'; iconMoon.style.display = 'none';
        } else {
            document.documentElement.removeAttribute('data-theme');
            iconSun.style.display = 'none'; iconMoon.style.display = 'block';
        }

        tBtn.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'light') {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'dark');
                iconSun.style.display = 'none'; iconMoon.style.display = 'block';
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
                iconSun.style.display = 'block'; iconMoon.style.display = 'none';
            }
        });

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDQPtaSrKK1yf7lZ-nA_uqckWM6jIXzdTk", 
            projectId: "aisatset" 
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function startSecurityCheck(code, myToken) {
            onSnapshot(doc(db, "licenses", code), (doc) => {
                const data = doc.data();
                if(!data) return;
                const validTokens = data.valid_tokens || [];
                if (!validTokens.includes(myToken)) {
                    alert("SESI BERAKHIR!\n\nBatas perangkat tercapai. Akun ini digunakan di perangkat lain.");
                    sessionStorage.clear();
                    location.reload();
                }
            });
        }

        if(sessionStorage.getItem('auth') === 'true'){
            const savedCode = sessionStorage.getItem('my_code');
            const savedToken = sessionStorage.getItem('my_token');
            if(savedCode && savedToken) {
                loginOverlay.style.display = 'none';
                mainContent.style.display = 'block';
                setTimeout(() => {
                    addMsg("Halo! Saya <b>Aimin</b>. Ada yang bisa dibantu?", 'bot');
                    showOpts();
                }, 800);
                startSecurityCheck(savedCode, savedToken);
            }
        }
    </script>
</body>
</html>
